# CocoaDessert

### 10 Apr 2023 02:47 uk
整合了jwt验证，因此在每个需要获取与用户相关的信息时需要给请求加上自定义的头部信息。很显然，简单的form表并不支持自定化请求，那么自然而然想到的是用ajax自定义请求。问题随之出现:((((...
情景：在主页，通过导航栏点击跳转至对应页面。

当时解决方式：使用<a>标签里的href属性指定url路径。（问题：不能添加自定义的头部信息）
随后：使用ajax发送请求，不像普通请求，url框不会跳转至在ajax里新指定url，请求响应不会被浏览器渲染，但可以接收到响应内容。

问题：怎么把接收到的渲染到当前页面。
怎么解决捏：添加点击触发器函数，通过ajax发送请求并自定义头部信息。在回调函数中，使用document.getElementById().innerHTML渲染响应内容。

问题：但还没解决url框不会改变为新的url的问题（内容变了，咋url还没变，不符合逻辑呀。magic？？？不合理）
怎么解决捏：先跳转至指定页面，啥也不做。在此页面添加自动发送自定义ajax请求的script。然后用上面提及的方法，渲染响应内容。

url框的变化，和内容的变化都解决了，就像一个普通请求方式的行为一样诶。。。

更多：
为什么使用头部信息，而不直接使用cookie验证身份。（省去了ajax的使用）

### 10 Apr 2023 16:24 uk
解决的需求：购物车里的商品可以调节数量。没啥大问题。
客户端发送put请求到后端数据库修改，服务器回复200状态码。在ajax回调函数里，判断回复里的状态码，如果是200，直接在客户端修改数量值，而不是去数据库查找购物车商品然后根据数量列更改。

更多：显然客户端能直接接触数据库是不好的。如果客户端恶意攻击或点击量大，数据库就可怜了呀。缓存此时站出来了，来成为数据库的棉袄。
